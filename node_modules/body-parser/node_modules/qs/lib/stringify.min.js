var Utils=require("./utils"),internals={delimiter:"&",arrayPrefixGenerators:{brackets:function(a,b){return a+"[]"},indices:function(a,b){return a+"["+b+"]"},repeat:function(a,b){return a}}};internals.stringify=function(a,b,c){if(Utils.isBuffer(a)?a=a.toString():a instanceof Date?a=a.toISOString():null===a&&(a=""),"string"==typeof a||"number"==typeof a||"boolean"==typeof a)return[encodeURIComponent(b)+"="+encodeURIComponent(a)];var d=[];if("undefined"==typeof a)return d;for(var e=Object.keys(a),f=0,g=e.length;g>f;++f){var h=e[f];d=d.concat(Array.isArray(a)?internals.stringify(a[h],c(b,h),c):internals.stringify(a[h],b+"["+h+"]",c))}return d},module.exports=function(a,b){b=b||{};var c="undefined"==typeof b.delimiter?internals.delimiter:b.delimiter,d=[];if("object"!=typeof a||null===a)return"";var e;e=b.arrayFormat in internals.arrayPrefixGenerators?b.arrayFormat:"indices"in b?b.indices?"indices":"repeat":"indices";for(var f=internals.arrayPrefixGenerators[e],g=Object.keys(a),h=0,i=g.length;i>h;++h){var j=g[h];d=d.concat(internals.stringify(a[j],j,f))}return d.join(c)};