function typeis(a,b){var c,d=b,e=typenormalize(a);if(!e)return!1;if(d&&!Array.isArray(d))for(d=new Array(arguments.length-1),c=0;c<d.length;c++)d[c]=arguments[c+1];if(!d||!d.length)return e;var f;for(c=0;c<d.length;c++)if(mimeMatch(normalize(f=d[c]),e))return"+"===f[0]||~f.indexOf("*")?e:f;return!1}function hasbody(a){return void 0!==a.headers["transfer-encoding"]||!isNaN(a.headers["content-length"])}function typeofrequest(a,b){var c=b;if(!hasbody(a))return null;if(arguments.length>2){c=new Array(arguments.length-1);for(var d=0;d<c.length;d++)c[d]=arguments[d+1]}var e=a.headers["content-type"];return typeis(e,c)}function normalize(a){switch(a){case"urlencoded":a="application/x-www-form-urlencoded";break;case"multipart":a="multipart/*"}return"+"===a[0]&&(a="*/*"+a),-1===a.indexOf("/")?mime.lookup(a):a}function mimeMatch(a,b){if(a===!1)return!1;var c=b.split("/"),d=a.split("/");return 2!==c.length||2!==d.length?!1:"*"!==d[0]&&d[0]!==c[0]?!1:"*+"===d[1].substr(0,2)?d[1].length<=c[1].length+1&&d[1].substr(1)===c[1].substr(1-d[1].length):"*"!==d[1]&&d[1]!==c[1]?!1:!0}function typenormalize(a){try{var b=typer.parse(a);return delete b.parameters,typer.format(b)}catch(c){return null}}var typer=require("media-typer"),mime=require("mime-types");module.exports=typeofrequest,typeofrequest.is=typeis,typeofrequest.hasBody=hasbody,typeofrequest.normalize=normalize,typeofrequest.match=mimeMatch;