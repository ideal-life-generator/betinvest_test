function defineGetter(a,b,c){Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:c})}var accepts=require("accepts"),deprecate=require("depd")("express"),isIP=require("net").isIP,typeis=require("type-is"),http=require("http"),fresh=require("fresh"),parseRange=require("range-parser"),parse=require("parseurl"),proxyaddr=require("proxy-addr"),req=exports=module.exports={__proto__:http.IncomingMessage.prototype};req.get=req.header=function(a){switch(a=a.toLowerCase()){case"referer":case"referrer":return this.headers.referrer||this.headers.referer;default:return this.headers[a]}},req.accepts=function(){var a=accepts(this);return a.types.apply(a,arguments)},req.acceptsEncodings=function(){var a=accepts(this);return a.encodings.apply(a,arguments)},req.acceptsEncoding=deprecate["function"](req.acceptsEncodings,"req.acceptsEncoding: Use acceptsEncodings instead"),req.acceptsCharsets=function(){var a=accepts(this);return a.charsets.apply(a,arguments)},req.acceptsCharset=deprecate["function"](req.acceptsCharsets,"req.acceptsCharset: Use acceptsCharsets instead"),req.acceptsLanguages=function(){var a=accepts(this);return a.languages.apply(a,arguments)},req.acceptsLanguage=deprecate["function"](req.acceptsLanguages,"req.acceptsLanguage: Use acceptsLanguages instead"),req.range=function(a){var b=this.get("Range");if(b)return parseRange(a,b)},req.param=function(a,b){var c=this.params||{},d=this.body||{},e=this.query||{},f=1===arguments.length?"name":"name, default";return deprecate("req.param("+f+"): Use req.params, req.body, or req.query instead"),null!=c[a]&&c.hasOwnProperty(a)?c[a]:null!=d[a]?d[a]:null!=e[a]?e[a]:b},req.is=function(a){return Array.isArray(a)||(a=[].slice.call(arguments)),typeis(this,a)},defineGetter(req,"protocol",function(){var a=this.connection.encrypted?"https":"http",b=this.app.get("trust proxy fn");return b(this.connection.remoteAddress,0)?(a=this.get("X-Forwarded-Proto")||a,a.split(/\s*,\s*/)[0]):a}),defineGetter(req,"secure",function(){return"https"==this.protocol}),defineGetter(req,"ip",function(){var a=this.app.get("trust proxy fn");return proxyaddr(this,a)}),defineGetter(req,"ips",function(){var a=this.app.get("trust proxy fn"),b=proxyaddr.all(this,a);return b.slice(1).reverse()}),defineGetter(req,"subdomains",function a(){var b=this.hostname;if(!b)return[];var c=this.app.get("subdomain offset"),a=isIP(b)?[b]:b.split(".").reverse();return a.slice(c)}),defineGetter(req,"path",function(){return parse(this).pathname}),defineGetter(req,"hostname",function(){var a=this.app.get("trust proxy fn"),b=this.get("X-Forwarded-Host");if(b&&a(this.connection.remoteAddress,0)||(b=this.get("Host")),b){var c="["===b[0]?b.indexOf("]")+1:0,d=b.indexOf(":",c);return~d?b.substring(0,d):b}}),defineGetter(req,"host",deprecate["function"](function(){return this.hostname},"req.host: Use req.hostname instead")),defineGetter(req,"fresh",function(){var a=this.method,b=this.res.statusCode;return"GET"!=a&&"HEAD"!=a?!1:b>=200&&300>b||304==b?fresh(this.headers,this.res._headers||{}):!1}),defineGetter(req,"stale",function(){return!this.fresh}),defineGetter(req,"xhr",function(){var a=this.get("X-Requested-With")||"";return"xmlhttprequest"==a.toLowerCase()});