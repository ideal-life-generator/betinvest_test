function Layer(a,b,c){return this instanceof Layer?(debug("new %s",a),b=b||{},this.handle=c,this.name=c.name||"<anonymous>",this.params=void 0,this.path=void 0,this.regexp=pathRegexp(a,this.keys=[],b),void("/"===a&&b.end===!1&&(this.regexp.fast_slash=!0))):new Layer(a,b,c)}function decode_param(a){if("string"!=typeof a)return a;try{return decodeURIComponent(a)}catch(b){var c=new TypeError("Failed to decode param '"+a+"'");throw c.status=400,c}}var pathRegexp=require("path-to-regexp"),debug=require("debug")("express:router:layer"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=Layer,Layer.prototype.handle_error=function(a,b,c,d){var e=this.handle;if(4!==e.length)return d(a);try{e(a,b,c,d)}catch(f){d(f)}},Layer.prototype.handle_request=function(a,b,c){var d=this.handle;if(d.length>3)return c();try{d(a,b,c)}catch(e){c(e)}},Layer.prototype.match=function(a){if(null==a)return this.params=void 0,this.path=void 0,!1;if(this.regexp.fast_slash)return this.params={},this.path="",!0;var b=this.regexp.exec(a);if(!b)return this.params=void 0,this.path=void 0,!1;this.params={},this.path=b[0];for(var c,d,e,f=this.keys,g=this.params,h=0,i=1,j=b.length;j>i;++i)d=f[i-1],c=d?d.name:h++,e=decode_param(b[i]),void 0===e&&hasOwnProperty.call(g,c)||(g[c]=e);return!0};