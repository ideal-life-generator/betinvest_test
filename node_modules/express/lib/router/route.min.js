function Route(a){debug("new %s",a),this.path=a,this.stack=[],this.methods={}}var debug=require("debug")("express:router:route"),Layer=require("./layer"),methods=require("methods"),utils=require("../utils");module.exports=Route,Route.prototype._handles_method=function(a){return this.methods._all?!0:(a=a.toLowerCase(),"head"!==a||this.methods.head||(a="get"),Boolean(this.methods[a]))},Route.prototype._options=function(){var a=Object.keys(this.methods);this.methods.get&&!this.methods.head&&a.push("head");for(var b=0;b<a.length;b++)a[b]=a[b].toUpperCase();return a},Route.prototype.dispatch=function(a,b,c){function d(h){if(h&&"route"===h)return c();var i=f[e++];return i?i.method&&i.method!==g?d(h):void(h?i.handle_error(h,a,b,d):i.handle_request(a,b,d)):c(h)}var e=0,f=this.stack;if(0===f.length)return c();var g=a.method.toLowerCase();"head"!==g||this.methods.head||(g="get"),a.route=this,d()},Route.prototype.all=function(){var a=utils.flatten([].slice.call(arguments));return a.forEach(function(a){if("function"!=typeof a){var b={}.toString.call(a),c="Route.all() requires callback functions but got a "+b;throw new Error(c)}var d=Layer("/",{},a);d.method=void 0,this.methods._all=!0,this.stack.push(d)},this),this},methods.forEach(function(a){Route.prototype[a]=function(){var b=utils.flatten([].slice.call(arguments));return b.forEach(function(b){if("function"!=typeof b){var c={}.toString.call(b),d="Route."+a+"() requires callback functions but got a "+c;throw new Error(d)}debug("%s %s",a,this.path);var e=Layer("/",{},b);e.method=a,this.methods[a]=!0,this.stack.push(e)},this),this}});