function View(a,b){b=b||{},this.name=a,this.root=b.root;var c=b.engines;this.defaultEngine=b.defaultEngine;var d=this.ext=extname(a);if(!d&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");d||(a+=d=this.ext=("."!=this.defaultEngine[0]?".":"")+this.defaultEngine),this.engine=c[d]||(c[d]=require(d.slice(1)).__express),this.path=this.lookup(a)}function tryStat(a){debug('stat "%s"',a);try{return fs.statSync(a)}catch(b){return void 0}}var debug=require("debug")("express:view"),path=require("path"),fs=require("fs"),utils=require("./utils"),dirname=path.dirname,basename=path.basename,extname=path.extname,join=path.join,resolve=path.resolve;module.exports=View,View.prototype.lookup=function(a){var b,c=[].concat(this.root);debug('lookup "%s"',a);for(var d=0;d<c.length&&!b;d++){var e=c[d],f=resolve(e,a),g=dirname(f),h=basename(f);b=this.resolve(g,h)}return b},View.prototype.render=function(a,b){debug('render "%s"',this.path),this.engine(this.path,a,b)},View.prototype.resolve=function(a,b){var c,d,e=this.ext;return c=join(a,b),d=tryStat(c),d&&d.isFile()?c:(c=join(a,basename(b,e),"index"+e),d=tryStat(c),d&&d.isFile()?c:void 0)};