function Accepts(a){return this instanceof Accepts?(this.headers=a.headers,void(this.negotiator=Negotiator(a))):new Accepts(a)}function extToMime(a){return~a.indexOf("/")?a:mime.lookup(a)}function validMime(a){return"string"==typeof a}var Negotiator=require("negotiator"),mime=require("mime-types"),slice=[].slice;module.exports=Accepts,Accepts.prototype.type=Accepts.prototype.types=function(a){Array.isArray(a)||(a=slice.call(arguments));var b=this.negotiator;if(!a.length)return b.mediaTypes();if(!this.headers.accept)return a[0];var c=a.map(extToMime),d=b.mediaTypes(c.filter(validMime)),e=d[0];return e?a[c.indexOf(e)]:!1},Accepts.prototype.encoding=Accepts.prototype.encodings=function(a){Array.isArray(a)||(a=slice.call(arguments));var b=this.negotiator;return a.length?b.encodings(a)[0]||!1:b.encodings()},Accepts.prototype.charset=Accepts.prototype.charsets=function(a){Array.isArray(a)||(a=[].slice.call(arguments));var b=this.negotiator;return a.length?this.headers["accept-charset"]?b.charsets(a)[0]||!1:a[0]:b.charsets()},Accepts.prototype.lang=Accepts.prototype.langs=Accepts.prototype.language=Accepts.prototype.languages=function(a){Array.isArray(a)||(a=slice.call(arguments));var b=this.negotiator;return a.length?this.headers["accept-language"]?b.languages(a)[0]||!1:a[0]:b.languages()};