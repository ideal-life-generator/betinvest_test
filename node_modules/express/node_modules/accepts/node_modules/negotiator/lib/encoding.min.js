function parseAcceptEncoding(a){for(var b=a.split(","),c=!1,d=1,e=0,f=0;e<b.length;e++){var g=parseEncoding(b[e].trim(),e);g&&(b[f++]=g,c=c||specify("identity",g),d=Math.min(d,g.q||1))}return c||(b[f++]={encoding:"identity",q:d,i:e}),b.length=f,b}function parseEncoding(a,b){var c=a.match(/^\s*(\S+?)\s*(?:;(.*))?$/);if(!c)return null;var d=c[1],e=1;if(c[2])for(var f=c[2].split(";"),b=0;b<f.length;b++){var g=f[b].trim().split("=");if("q"===g[0]){e=parseFloat(g[1]);break}}return{encoding:d,q:e,i:b}}function getEncodingPriority(a,b,c){for(var d={o:-1,q:0,s:0},e=0;e<b.length;e++){var f=specify(a,b[e],c);f&&(d.s-f.s||d.q-f.q||d.o-f.o)<0&&(d=f)}return d}function specify(a,b,c){var d=0;if(b.encoding.toLowerCase()===a.toLowerCase())d|=1;else if("*"!==b.encoding)return null;return{i:c,o:b.i,q:b.q,s:d}}function preferredEncodings(a,b){var c=parseAcceptEncoding(a||"");if(!b)return c.filter(isQuality).sort(compareSpecs).map(function(a){return a.encoding});var d=b.map(function(a,b){return getEncodingPriority(a,c,b)});return d.filter(isQuality).sort(compareSpecs).map(function(a){return b[d.indexOf(a)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function isQuality(a){return a.q>0}module.exports=preferredEncodings,preferredEncodings.preferredEncodings=preferredEncodings;